
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= cast.name %> - Details</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- External CSS -->
    <link rel="stylesheet" href="/css/styles.css" />

    <!-- Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <!-- Toastify CSS and JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  </head>
  <body>
    <!-- Navbar -->
    <%- include('../partials/navbar.ejs') %>

    <!-- IMDb-Inspired Cast Detail Section -->
    <section class="container my-5 pt-5 d-flex justify-content-center">
      <div class="cast-detail-section w-100" style="max-width: 1100px; display: flex; flex-direction: row; align-items: flex-start; background: #181818; border-radius: 16px; box-shadow: 0 4px 32px rgba(0,0,0,0.4); padding: 2.5rem 2rem 2rem 2rem; gap: 2.5rem;">
        <!-- Actor Photo on the left -->
        <div class="actor-photo d-flex justify-content-center align-items-start flex-column" style="width: 30%; min-width: 260px;">
          <img
            src="<%= cast.profileImageURL %>"
            alt="<%= cast.name %> photo"
            class="img-fluid mb-3"
            style="border-radius: 12px; box-shadow: 0 2px 16px rgba(0,0,0,0.5); max-width: 260px; max-height: 380px; object-fit: cover; background: #222;"
          />
        </div>

        <!-- Swiped Cards for Movies in the Center -->
        <div class="movies-carousel" style="width: 70%; min-width: 320px;">
          <% if (cast.movies && cast.movies.length > 0) { %>
            <div id="moviesCarousel" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-inner">
                <% cast.movies.forEach((movie, index) => { %>
                  <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                    <img
                      src="<%= movie.posterURL %>"
                      class="d-block w-100"
                      alt="<%= movie.title %> poster"
                      style="border-radius: 12px; max-height: 400px; object-fit: cover; box-shadow: 0 2px 16px rgba(0,0,0,0.5); background: #222;"
                    />
                    <div class="carousel-caption d-none d-md-block" style="background: rgba(0, 0, 0, 0.7); border-radius: 8px; padding: 10px;">
                      <h5 style="color: #f5c518; font-weight: 700;"><%= movie.title %></h5>
                    </div>
                  </div>
                <% }) %>
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#moviesCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#moviesCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          <% } else { %>
            <p class="text-light" style="font-size: 1.15rem;">No movies found for this cast member.</p>
          <% } %>
          <!-- Description below carousel -->
          <div class="description mt-4" style="font-size: 1.15rem; color: #e6e6e6; line-height: 1.7; max-width: 700px;">
            <%= cast.description %>
          </div>
          <!-- Birthday and Nationality -->
          <div class="meta d-flex flex-column mt-3" style="gap: 0.7rem; font-size: 1.1rem; color: #b3b3b3;">
            <span><i class="fa-solid fa-cake-candles"></i> Birthday: <%= new Date(cast.birthdate).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) %></span>
            <span><i class="fa-solid fa-globe"></i> Nationality: <%= cast.nationality %></span>
          </div>
        </div>
      </div>
    </section>

    <!-- You May Like Section -->
    <% if (relatedCasts && relatedCasts.length > 0) { %>
      <section class="you-may-like-section container my-5">
        <h2>You May Like</h2>
        <div class="row">
          <% relatedCasts.forEach(similar => { %>
            <div class="col-6 col-sm-4 col-md-3 mb-4">
              <a href="/api/casts/<%= similar._id %>" class="text-decoration-none">
                <div class="card h-100">
                  <img
                    src="<%= similar.profileImageURL %>"
                    class="card-img-top"
                    alt="<%= similar.name %> photo"
                    style="height: 250px; object-fit: cover"
                  />
                  <div class="card-body text-center">
                    <h6 class="card-title"><%= similar.name %></h6>
                  </div>
                </div>
              </a>
            </div>
          <% }) %>
        </div>
      </section>
    <% } %>

    <!-- Footer -->
    <%- include('../partials/footer.ejs') %>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script type="module" src="/js/script.js"></script>
  </body>
</html>